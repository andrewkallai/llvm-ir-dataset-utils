SHELL := /bin/bash

WILD := $(shell echo {$(begin)..$(end)})


WILD := $(filter-out 24761 279543 214027 221772 189851 238896 171412 201295 261317 250940 179648 237100 344534 145111 144670 144681 144699 144950 145009 145028 145100 145234 145293 145340 145399 145500 145530 145597 145849 145880 145940 146026 146045 146069 146158 146250 146260 146417 146433 146556 146753 146772 146808 146842 146907 146941 147068 147176 147210 147339 147412 147432 147543 147564 147629 147666 147744 147798 147803 147896 147905 147963 148021 148131 148167 148220 148325 148544 148592 148607 148653 148682 148766 148849 148871 148880 148973 148979 149028 149139 149315 149359 149392 149492 149538 149587 149838 149870 149885 149903 150031 150094 150121 150247 150395 150397 150466 150553 150607 150757 150767 150791 150821 150900 151136 151155 151354 151366 151400 151408 151487 151497 151540 151550 151650 151662 151703 151746 151821 152037 152065 152073 152135 152142 152206 152232 152256 152319 152351 152382 152602 152655 152668 152797 152821 152857 152858 152988 153008 153020 153111 153133 153166 153265 153271 153409 153447 153510 153568 153586 153904 154009 154044 154117 154257 154275 154337 154421 154526 154703 154707 154737 154856 154903 154952 154978 155085 155195 155234 155263 155336 155362 155412 155462 155558 155661 155707 155763 155880 156034 156207 156241 156287 156409 156457 156468 156478 156618 156695 156753 156792 156819 156832 156918 156928 156971 156980 156994 157009 157044 157051 157411 157422 157535 157931 157977 158014 158022 158076 158166 158711 158894 159043 159186 159218 159273 159315 159389 159395 159462 159558 159736 159834 159855 159894 159996 160012 160074 160112 160151 160242 160269 160332 160333 160396 160557 160565 160656 160749 160783 160797 160975 161016 161030 161212 161311 161337 161344 161432 161473 161547 161648 161685 161696 161757 161776 161947 162081 162129 162190 162255 162425 162483 162509 162568 162625 162744 162878 162883 162906 162915 162927 162962 163093 163278 163330 163430 163477 163508 163552 163622 163677 163941 163946 164094 164168 164185 164217 164325 164349 164370 164437 164448 164529 164809 164887 164925 164981 164985 165001 165031 165043 165070 165125 165130 165191 165438 165542 165605 165737 165871 165913 165965 166011 166017 166068 166149 166172 166245 166311 166387 166576 166612 166677 166683 166707 166817 166900 166929 167029 167047 167121 167158 167166 167288 167301 167313 167349 167541 167609 167802 167935 168164 168255 168277 168347 168403 168495 168512 168616 168687 168740 168775 168965 168997 169000 169038 169097 169109 169154 169298 169385 169415 169569 169591 169666 169671 169871 169886 170038 170058 170079 170126 170221 170227 170281 170388 170458 170546 170563 170655 170727 170736 170804 170810 170824 170885 170933 170960 170995 171137 171168 171238 171310 171354 171372 171397 171507 171525 171542 171583 171639 171725 171807 171861 171953 171959 172050 172085 172139 172176 172297 172329 172356 172476 172543 172600 172826 172890 172946 172959 173010 173082 173129 173528 173574 173650 173656 173806 173981 174088 174111 174139 174215 174351 174477 174862 174899 174916 175068 175251 175333 175338 175375 175425 175508 175536 175674 175675 175735 175777 175789 175821 176262 176291 176427 176544 176565 176788 176872 176894 176963 177085 177092 177101 177112 177226 177255 177269 177354 177394 177404 177456 177485 177493 177523 177572 177597 177658 177775 177794 177879 178015 178026 178047 178125 178161 178188 178206 178272 178310 178318 178556 178588 178647 178671 178678 178694 178703 178761 178866 179012 179173 179224 179256 179276 179306 179365 179393 179409 179516 179541 179770 180021 180028 180037 180072 180158 180208 180311 180401 180451 180555 180691 180725 180747 180793 180819 180834 180886 180887 181040 181130 181198 181231 181281 181289 181366 181453 181492 181619 181713 181780 181790 181849 181892 181936 181940 182042 182273 182311 182321 182410 182453 182457 182503 182520 182532 182553 182778 182783 182858 182940 182965 183060 183126 183197 183264 183347 183447 183584 183650 183692 183714 183841 183912 183926 183929 183933 184312 184329 184334 184454 184604 184684 184754 184821 184880 184886 185034 185039 185162 185197 185273 185342 185372 185442 185513 185515 185821 185966 186034 186035 186132 186258 186418 186436 187000 187140 187167 187374 187394 187523 187532 187590 187616 187663 187664 187678 187736 187811 187827 187914 188024 188028 188122 188337 188359 188372 188428 188502 188717 188754 188904 189022 189023 189048 189126 189132 189342 189368 189552 189641 189714 189730 189754 189834 189902 189944 189959 190000 190067 190216 190252 190366 190432 190439 190507 190535 190653 190705 190822 190825 190842 190897 190949 190954 191000 191021 191057 191059 191136 191183 191200 191221 191230 191277 191366 191375 191435 191498 191695 191698 191758 191811 191874 191978 192017 192028 192032 192145 192212 192392 192395 192482 192514 192573 192612 192640 192653 192699 193040 193193 193283 193375 193444 193475 193525 193540 193723 193778 193780 193808 193832 194034 194047 194056 194065 194067 194164 194192 194213 194270 194279 194340 194420 194451 194765 194787 194799 194907 194910 194925 195100 195183 195320 195329 195363 195392 195490 195495 195549 195674 195717 195741 195781 195880 195970 195975 196100 196209 196226 196239 196380 196464 196629 196663 196699 196743 196826 196886 196930 197028 197073 197117 197174 197226 197237 197407 197550 197599 197617 197792 197841 197861 197943 197946 198007 198080 198094 198173 198249 198361 198385 198393 198490 198547 198560 198562 198597 198647 198711 198717 198792 198874 198968 199026 199028 199111 199139 199374 199689 199724 199747 199819 199921 200011 200018 200094 200314 200411 200448 200509 200560 200576 200725 200852 200861 200871 200928 200981 201074 201205 201304 201342 201360 201385 201419 201434 201493 201707 201745 201804 201975 202033 202072 202360 202363 202378 202473 202545 202665 202704 202811 202879 203055 203212 203217 203229 203244 203247 203305 203400 203401 203451 203473 203566 203596 203604 203643 203675 203693 203729 203751 203863 203990 204179 204315 204453 204503 204642 204656 204703 204709 204776 204888 204905 205029 205050 205068 205112 205211 205219 205232 205605 205621 205749 205916 205927 205955 206074 206149 206150 206397 206427 206574 206582 206603 206608 206700 206723 206887 206908 206967 206979 207046 207062 207098 207215 207249 207260 207316 207326 207499 207579 207627 207649 207814 207891 207932 208046 208219 208278 208318 208419 208426 208427 208429 208453 208464 208510 208582 208635 208652 208710 208831 208832 208911 208953 209048 209055 209119 209295 209304 209335 209413 209439 209447 209473 209604 209608 209794 209838 209876 209881 209985 210059 210161 210184 210241 210244 210256 210292 210475 210524 210526 210623 210701 210747 210756 210810 210861 210864 210883 210903 210904 210940 211021 211043 211091 211138 211154 211176 211308 211356 211368 211389 211462 211538 211561 211607 211846 211870 211895 211930 212005 212011 212132 212159 212229 212321 212348 212457 212580 212711 212728 212758 212762 212797 212805 212817 212945 213123 213472 213517 213557 213636 213703 213763 213788 213890 213920 213938 214000 214056 214067 214083 214272 214281 214282 214325 214662 214732 215073 215137 215163 215272 215363 215428 215434 215614 215659 215673 215691 215874 215880 215932 216105 216193 216285 216292 216415 216424 216454 216461 216507 216585 216620 216648 216727 216856 216872 216879 217041 217089 217131 217182 217282 217329 217338 217618 217710 217715 217814 217834 217949 218021 218054 218106 218117 218228 218235 218361 218365 218407 218509 218528 218538 218550 218606 218632 218657 218828 219012 219133 219290 219336 219487 219661 219835 219958 219964 220053 220087 220262 220387 220486 220724 220829 220874 220901 221087 221092 221357 221509 221519 221665 221688 221796 221897 221988 222044 222098 222113 222123 222156 222223 222316 222346 222356 222503 222569 222599 222761 222888 222967 223001 223135 223211 223212 223316 223356 223480 223554 223560 223566 223639 223668 223698 223731 223806 223841 223885 223975 223998 224013 224100 224181 224195 224304 224371 224773 225044 225048 225102 225103 225206 225214 225337 225378 225386 225404 225467 225601 225845 225852 225864 225869 225878 225918 226075 226116 226128 226168 226312 226373 226439 226515 226558 226720 226731 226753 226763 226797 226870 226892 226950 227044 227055 227358 227649 227730 227789 227806 227931 227941 228117 228141 228168 228276 228329 228689 228710 228815 228875 228999 229041 229141 229257 229288 229292 229347 229593 229715 229766 229944 230252 230321 230336 230528 230539 230557 230563 230565 230713 230924 230945 230985 231059 231268 231272 231290 231303 231378 231476 231496 231588 231646 231900 231926 231960 232315 232344 232821 232836 233168 233305 233352 233385 233468 233507 233611 233749 233767 233779 233830 233945 233958 233965 233973 234062 234095 234114 234223 234251 234323 234452 234463 234485 234528 234797 234840 234868 234963 234979 235008 235011 235111 235261 235345 235557 235604 235805 235810 235850 235853 235856 235879 235898 236110 236114 236201 236221 236348 236548 236621 236869 236874 236955 237123 237177 237286 237311 237385 237444 237570 237586 237667 237731 237756 237789 237866 237879 237953 237977 237995 238054 238070 238083 238201 238248 238347 238426 238495 238608 238724 238817 238974 239011 239053 239064 239114 239203 239363 239365 239371 239686 239708 239731 239736 239767 239803 239861 239924 239964 239976 240047 240113 240347 240457 240486 240522 240803 240876 240923 240952 241189 241192 241240 241366 241522 241633 241674 241729 241804 242055 242171 242271 242420 242425 242430 242499 242504 242720 242727 242731 242764 242795 242808 242840 242844 242928 243008 243025 243448 243553 243672 243756 243846 244030 244050 244081 244130 244161 244181 244200 244437 244562 244591 244713 244829 244902 245305 245331 245484 245604 245648 245664 245701 245725 245989 246002 246091 246155 246227 246245 246278 246310 246388 246454 246473 246725 246955 246964 247026 247154 247219 247317 247423 247505 247573 247647 247795 247912 248206 248354 248600 248607 248624 248660 248735 248756 248794 248856 248907 249038 249124 249145 249433 249441 249460 249517 249537 249623 249722 249780 249842 249997 250092 250104 250117 250134 250283 250319 250370 250390 250444 250487 250612 250697 250802 250813 250816 250870 250998 251042 251052 251184 251221 251236 251309 251382 251456 251512 251524 251530 251541 251559 251561 251664 251814 251858 251898 252015 252137 252162 252319 252436 252439 252481 252646 252702 252704 252754 253077 253161 253194 253325 253342 253454 253474 253499 253566 253605 253654 253680 253930 253984 254170 254193 254214 254223 254255 254329 254333 254419 254509 254520 254603 254613 254734 254790 254802 254852 254887 255021 255031 255056 255208 255234 255243 255270 255275 255311 255314 255692 255699 255706 255715 255807 255829 255911 255962 256107 256205 256220 256226 256274 256284 256373 256505 256533 256869 256963 257052 257152 257171 257216 257280 257397 257416 257630 257738 257793 257908 257913 258108 258158 258200 258269 258297 258435 258459 258467 258507 258513 258596 258607 258640 258688 258841 258911 258917 259036 259165 259290 259320 259483 259486 259571 259600 259668 259718 259725 260080 260122 260214 260246 260255 260470 260544 260594 260634 260678 260730 260904 261009 261053 261211 261384 261675 261681 261748 261836 261866 261952 261994 262114 262161 262183 262236 262254 262327 262380 262387 262411 262437 262534 262553 262588 262612 262613 262790 262949 263018 263077 263115 263126 263199 263280 263347 263380 263519 263524 263566 263806 263937 264023 264138 264253 264283 264305 264424 264676 264679 264762 264807 264808 264873 264877 264890 264907 264988 265063 265159 265167 265199 265223 265288 265331 265364 265447 265495 265526 265552 265614 265621 265631 265665 265820 265877 265977 266053 266113 266117 266178 266233 266417 266652 266663 266849 266864 266903 266939 266978 267096 267128 267238 267500 267732 267738 267741 267904 267920 268052 268058 268059 268133 268210 268211 268218 268309 268459 268501 268530 268581 268651 268923 268926 268995 269022 269039 269064 269066 269118 269336 269367 269399 269500 269580 269630 269639 269707 269764 269828 269845 269866 270012 270116 270147 270181 270467 270512 270653 270668 270676 270687 270699 270871 270907 270915 270993 271029 271035 271058 271072 271114 271294 271326 271363 271402 271445 271712 271846 271981 271983 271993 272061 272118 272372 272424 272447 272611 272684 272704 272730 272813 272839 272986 273054 273233 273398 273418 273528 273748 274010 274036 274071 274216 274259 274276 274308 274352 274524 274693 274810 274837 274854 275005 275353 275461 275491 275600 275731 275757 275787 275804 275819 275939 276253 276548 276591 276700 276970 277039 277089 277135 277152 277182 277188 277214 277236 277304 277316 277350 277414 277464 277578 277736 277798 277847 277934 278050 278219 278230 278271 278366 278395 278526 278536 278634 278713 278717 278760 278765 278858 278901 278924 279037 279085 279286 279299 279512 279518 279591 279654 279697 279722 279724 279734 279789 279856 279895 279943 279998 280040 280077 280133 280219 280272 280273 280329 280395 280411 280464 280487 280652 280724 280745 280850 281077 281088 281115 281117 281216 281373 281534 281771 281805 282064 282068 282138 282158 282197 282304 282342 282356 282445 282546 282564 282569 282674 282717 282722 282725 282766 282787 282794 282860 282870 283049 283150 283176 283228 283324 283445 283507 283582 283622 283728 283791 283827 283833 283867 283955 283960 284066 284212 284306 284313 284340 284355 284398 284410 284645 284851 284926 284975 285087 285176 285187 285257 285292 285296 285320 285464 285539 285763 285810 285830 285972 286004 286049 286120 286265 286385 286397 286423 286505 286508 286606 286630 286703 286710 286782 286834 286929 287085 287255 287358 287496 287512 287575 287582 287611 287651 287686 287703 287713 287755 287900 287981 288022 288173 288263 288445 288572 288633 288664 288705 288731 288760 288774 288851 288889 288908 288974 289065 289253 289335 289336 289345 289378 289488 289492 289493 289505 289600 289618 289628 289738 289751 289844 289995 290059 290066 290069 290070 290073 290141 290166 290275 290301 290328 290488 290496 290518 290561 290614 290736 290758 290836 291082 291119 291144 291289 291311 291412 291561 291609 291642 291683 291697 291721 291730 291783 291845 291958 291987 292043 292104 292150 292183 292230 292360 292371 292417 292496 292504 292583 292594 292652 292665 292784 292933 293060 293078 293112 293172 293237 293266 293376 293699 293824 293932 293943 293981 294040 294206 294223 294225 294271 294331 294333 294364 294395 294550 294770 294871 294904 294917 294979 295152 295254 295294 295315 295366 295459 295489 295535 295548 295552 295576 295616 295668 295695 295756 295871 295890 295999 296109 296185 296304 296350 296373 296583 296588 296614 296679 296867 296951 297081 297193 297257 297304 297308 297324 297333 297353 297477 297596 297644 297665 297696 297783 297847 298007 298040 298077 298091 298136 298147 298169 298239 298407 298443 298468 298496 298652 298692 298752 298873 298905 299014 299214 299251 299277 299341 299419 299577 299580 299618 299627 299638 299707 299717 299749 299960 300072 300173 300382 300443 300473 300511 300517 300542 300672 300725 300733 300783 300927 301031 301056 301092 301094 301103 301109 301117 301123 301210 301242 301370 301382 301389 301773 301783 301823 301921 301994 302043 302208 302283 302461 302501 302548 302578 302778 302828 302942 303017 303043 303078 303087 303439 303445 303600 303640 303858 303916 303926 304173 304306 304380 304419 304453 304575 304592 304846 304929 305005 305037 305126 305176 305202 305285 305298 305333 305338 305379 305493 305494 305495 305528 305535 305618 305853 305887 305969 305970 305994 305995 306124 306261 306308 306351 306384 306565 306591 306593 306601 306723 306778 306944 306968 307006 307232 307301 307564 307666 307738 307783 307792 307816 307826 307836 307983 308006 308214 308299 308341 308447 308516 308635 308973 309120 309225 309277 309305 309325 309380 309468 309520 309543 309563 309571 309695 309783 309837 310073 310098 310140 310187 310194 310244 310396 310696 310759 310777 310811 311317 311363 311419 311450 311662 311929 311937 312102 312139 312865 312882 312940 312970 313151 313203 313207 313259 313269 313351 313409 313415 313441 313593 313675 313702 313734 313892 314016 314051 314077 314168 314208 314294 314326 314402 314520 314590 314598 314777 314837 314982 315002 315012 315016 315045 315051 315088 315098 315105 315222 315235 315266 315331 315599 315678 315711 315820 315872 315899 315950 316053 316056 316353 316377 316408 316417 316475 316509 316594 316605 316610 316680 316728 316759 316816 316889 316930 317025 317093 317127 317189 317241 317392 317515 317599 317602 317613 317748 317749 317835 317859 317886 317890 318331 318414 318452 318458 318523 318564 318859 318900 318973 319026 319072 319098 319176 319289 319430 319448 319455 319501 319504 319558 319595 319602 319666 319768 319835 319867 319920 319992 320080 320125 320204 320232 320251 320472 320500 320584 320682 320734 320754 320770 320877 321051 321112 321114 321144 321193 321225 321319 321330 321433 321456 321504 321546 321573 321707 321715 321720 321933 322058 322094 322104 322137 322198 322260 322349 322387 322438 322485 322598 322630 322701 322789 322819 322836 322898 323040 323082 323233 323361 323435 323565 323602 323608 323628 323635 323698 323731 323763 323851 323870 323924 324062 324175 324190 324205 324207 324327 324396 324417 324435 324439 324440 324452 324515 324712 324779 324872 324897 325108 325143 325180 325288 325321 325405 325411 325422 325435 325556 325570 325718 325738 325891 325959 325999 326123 326160 326216 326237 326266 326413 326641 326661 326896 326999 327121 327248 327369 327509 327526 327550 327836 327977 328098 328262 328372 328398 328403 328478 328581 328637 328759 328865 328903 328940 328988 329067 329235 329245 329377 329458 329640 329663 329916 329959 330032 330050 330089 330097 330147 330160 330318 330376 330406 330409 330414 330424 330428 330466 330494 330527 330628 330646 330714 330811 330835 330926 330964 331110 331230 331248 331430 331445 331458 331525 331605 331626 331651 331669 331740 331843 331976 332027 332267 332338 332358 332411 332619 332630 332687 332726 332775 332896 332977 333034 333129 333209 333375 333529 333658 333787 333909 333917 333952 334183 334493 334501 334550 334578 334694 334802 334859 334885 334952 335043 335061 335168 335202 335274 335360 335374 335377 335399 335407 335604 335639 335687 335838 335876 335929 335947 336042 336048 336049 336065 336096 336127 336391 336526 336692 336805 336869 336906 337003 337024 337164 337209 337370 337401 337484 337488 337503 337511 337596 337653 337710 337908 337951 337996 338079 338127 338226 338417 338477 338479 338568 338597 338634 338651 338730 338795 338814 338903 338995 339041 339097 339164 339228 339257 339278 339767 339782 339834 339988 340114 340147 340250 340319 340378 340474 340656 340661 340721 340746 340764 340830 340839 340848 340850 340912 340930 341167 341267 341424 341453 341476 341605 341742 341784 341896 341904 341942 341944 342072 342115 342153 342202 342284 342374 342408 342480 342622 342648 342967 343101 343117 343304 343441 343484 343492 343548 343655 343657 343821 343858 343998 344102 344112 344388 344501 344532 344533 344572 344671 344704 344762 344767 344884 344889 345118 345271 345370 345483 345560 345566 345691 345709 345920 346023 346051 346114 346186 346270 346408 346422 346458 346492 346571 346664 346697 346772 346847 346892 346905 346980 347203 347312 347334 347380 347540 347564 347671 347675 347726 347786 347923 348033 348049 348134 348208 348342 348474 348492 348506 348607 348818 348915 348916 349456 349473 349776 350006 350127 350306 350323 350457 350574 350608 350610 350651 350693 350747 350851 350956 351022 351042 351064 351281 351331 351337 351349 351403 351408 351568 351603 351734 351815 351955 352021 352041 352073 352151 352160 352251 352280 352300 352356 352367 352383 352545 352620 352623 352753 352775 352912 352947 352974 353016 353105 353152 353199 353255 353266 353279 353504 353561 353689,$(WILD)) 

CC := clang

ifeq ($(lang), cpp)
    CC := clang++ 
endif

all: $(WILD) 

$(WILD):
	@perf stat --no-big-num -e instructions:u -o \
		$(lang)/perf_stat_files/file$@.txt \
  	$(CC) -O3 -c $(lang)/bc_files/file$@.bc \
		-o $(lang)/object_files/file$@.o
	@instruct=$$(awk '/instructions/ {print $$1}' \
		$(lang)/perf_stat_files/file$@.txt); \
		echo "file$@, $$instruct" >> $(lang)/instruction_counts/inst$@.csv
	@size=$$(llvm-size $(lang)/object_files/file$@.o | awk 'NR==2 {print $$1}'); \
		echo "file$@, $$size" >> $(lang)/textseg_sizes/textseg$@.csv

